{"ast":null,"code":"import React,{useRef,useState}from'react';import\"./Login.css\";import{useNavigate}from'react-router-dom';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Login=_ref=>{let{setlogin}=_ref;const[sendEmail,setSendEmail]=useState('');const[generatedOTP,setGeneratedOTP]=useState(null);// Use state to persist OTP\nconst navigate=useNavigate();const cont1=useRef();const cont2=useRef();const email=useRef();const Aname=useRef();const input1=useRef();// OTP Submission Handler\nconst handleSubmit=()=>{const enteredOTP=input1.current.value.trim();if(!enteredOTP){toast.error(\"Enter the OTP\");return;}if(parseInt(enteredOTP)===generatedOTP){toast.success(\"OTP Verified Successfully!\");setTimeout(()=>{setlogin(true);toast.dismiss();navigate(\"/home\");},1500);}else{toast.error('Invalid OTP');input1.current.value='';}};// Send OTP Handler\nconst sendOtp=async()=>{const name=Aname.current.value.trim();const emailValue=email.current.value.trim();const c1=cont1.current;const c2=cont2.current;if(!name){toast.error(\"Enter your Name!\");return;}if(!emailValue||emailValue.length<12){toast.error(\"Invalid Email\");return;}const otp=Math.floor(1000+Math.random()*9000);// Generate a 4-digit OTP\nsetGeneratedOTP(otp);// Save the OTP in state\nc1.style.display=\"none\";c2.style.display=\"block\";setSendEmail(emailValue);toast.success(\"OTP sent successfully!\");console.log(\"Generated OTP:\",otp);try{const api=await fetch(\"https://backend-server-nryo.onrender.com/register\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({mail:emailValue,name:name,otp})});console.log(\"API Response:\",api);}catch(error){console.error(\"Error sending OTP:\",error);toast.error(\"Failed to send OTP. Try again.\");}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(\"h2\",{id:\"headh2\",className:\"text text-center\",children:\"TPA MANAGEMENT\"}),/*#__PURE__*/_jsx(\"p\",{id:\"headp\",className:\"text text-center\",children:\"TPA connects you with the world and helps you share your moments.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"Lcontainer\",ref:cont1,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Log in here\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter your name\",ref:Aname}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Enter your Email\",ref:email}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Send OTP\",onClick:sendOtp})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container1\",id:\"container1\",ref:cont2,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"OTP Verification\"}),/*#__PURE__*/_jsxs(\"span\",{id:\"emailspan\",children:[\"Sent to: \",/*#__PURE__*/_jsx(\"i\",{children:sendEmail})]}),/*#__PURE__*/_jsx(\"div\",{className:\"inputsAll\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"inputs\",ref:input1,placeholder:\"Enter Your OTP\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\",id:\"sub-btn\",onClick:handleSubmit})]})})]})});};export default Login;","map":{"version":3,"names":["React","useRef","useState","useNavigate","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","_ref","setlogin","sendEmail","setSendEmail","generatedOTP","setGeneratedOTP","navigate","cont1","cont2","email","Aname","input1","handleSubmit","enteredOTP","current","value","trim","error","parseInt","success","setTimeout","dismiss","sendOtp","name","emailValue","c1","c2","length","otp","Math","floor","random","style","display","console","log","api","fetch","method","headers","body","JSON","stringify","mail","children","className","id","ref","type","placeholder","onClick"],"sources":["C:/Users/ASUS/Desktop/TPA/tpa_management/src/components/Login.jsx"],"sourcesContent":["import React, { useRef, useState } from 'react';\r\nimport \"./Login.css\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst Login = ({ setlogin }) => {\r\n  const [sendEmail, setSendEmail] = useState('');\r\n  const [generatedOTP, setGeneratedOTP] = useState(null); // Use state to persist OTP\r\n  const navigate = useNavigate();\r\n\r\n  const cont1 = useRef();\r\n  const cont2 = useRef();\r\n  const email = useRef();\r\n  const Aname = useRef();\r\n  const input1 = useRef();\r\n\r\n  // OTP Submission Handler\r\n  const handleSubmit = () => {\r\n    const enteredOTP = input1.current.value.trim();\r\n\r\n    if (!enteredOTP) {\r\n      toast.error(\"Enter the OTP\");\r\n      return;\r\n    }\r\n\r\n    if (parseInt(enteredOTP) === generatedOTP) {\r\n      toast.success(\"OTP Verified Successfully!\");\r\n      setTimeout(() => {\r\n        setlogin(true);\r\n        toast.dismiss();\r\n        navigate(\"/home\");\r\n      }, 1500);\r\n    } else {\r\n      toast.error('Invalid OTP');\r\n      input1.current.value = '';\r\n    }\r\n  };\r\n\r\n  // Send OTP Handler\r\n  const sendOtp = async () => {\r\n    const name = Aname.current.value.trim();\r\n    const emailValue = email.current.value.trim();\r\n    const c1 = cont1.current;\r\n    const c2 = cont2.current;\r\n\r\n    if (!name) {\r\n      toast.error(\"Enter your Name!\");\r\n      return;\r\n    }\r\n\r\n    if (!emailValue || emailValue.length < 12) {\r\n      toast.error(\"Invalid Email\");\r\n      return;\r\n    }\r\n\r\n    const otp = Math.floor(1000 + Math.random() * 9000); // Generate a 4-digit OTP\r\n    setGeneratedOTP(otp); // Save the OTP in state\r\n\r\n    c1.style.display = \"none\";\r\n    c2.style.display = \"block\";\r\n    setSendEmail(emailValue);\r\n\r\n    toast.success(\"OTP sent successfully!\");\r\n    console.log(\"Generated OTP:\", otp);\r\n\r\n    try {\r\n      const api = await fetch(\"https://backend-server-nryo.onrender.com/register\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          mail: emailValue,\r\n          name: name,\r\n          otp,\r\n        }),\r\n      });\r\n      console.log(\"API Response:\", api);\r\n    } catch (error) {\r\n      console.error(\"Error sending OTP:\", error);\r\n      toast.error(\"Failed to send OTP. Try again.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"main\">\r\n        <h2 id='headh2' className='text text-center'>TPA MANAGEMENT</h2>\r\n        <p id='headp' className='text text-center'>\r\n          TPA connects you with the world and helps you share your moments.\r\n        </p>\r\n        <div className=\"Lcontainer\" ref={cont1}>\r\n          <h2>Log in here</h2>\r\n          <input type='text' placeholder='Enter your name' ref={Aname} />\r\n          <input type='email' placeholder='Enter your Email' ref={email} />\r\n          <input type=\"submit\" value=\"Send OTP\" onClick={sendOtp} />\r\n        </div>\r\n        <div>\r\n          <div className=\"container1\" id=\"container1\" ref={cont2}>\r\n            <h2>OTP Verification</h2>\r\n            <span id='emailspan'>Sent to: <i>{sendEmail}</i></span>\r\n            <div className=\"inputsAll\">\r\n              <input\r\n                type=\"number\"\r\n                className=\"inputs\"\r\n                ref={input1}\r\n                placeholder=\"Enter Your OTP\"\r\n              />\r\n            </div>\r\n            <input type=\"submit\" value=\"Submit\" id=\"sub-btn\" onClick={handleSubmit} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}